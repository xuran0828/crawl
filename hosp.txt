
                        															
set foreign_key_checks=0;															
drop table if exists hosp_crawler ;															
															
create table hosp_crawler (															
														
website                            varchar(64)                                     comment '医院官方网址'															
,phone                              varchar(64)                                     comment '总院的总机电话'															
															
,pr                                 varchar(8)                                      comment '省/自治区/直辖市，值源于字典dict_dist_class_iii.code_i'															
,city                               varchar(25)                                     comment '市/地区/州，值源于字典dict_dist_class_iii.code_ii'															
															
,addr_detail                        varchar(120)                                    comment '医院地址，记录省市区之后的详细地址'															
															
														
														
															
,key idx_1_hosp_crawler (pr)															
,key idx_2_hosp_crawler (city)															
) engine= InnoDB default charset=utf8,comment='医院原始数据表';															
															
							
														
															
https://bbs.csdn.net/topics/390595438/


update 表 set redundant = true where 字段 in (select 字段 from 另一个表)

SELECT SUBSTRING(website,12,4) as abstract from hosp_rawinfos;

update hosp_rawinfos set web_id=(SELECT SUBSTRING(website,12,4));
UPDATE hosp_rawinfo set web_id=(SELECT SUBSTRING_INDEX(website,'.',2));

从右数第二个分隔符的右边全部，再从左数的第一个分隔符的左边：

　　substring_index(substring_index(str,'.',-2),‘.’,1);


select * from hosp_rawinfo;

select * from hosp_rawinfo o where o.remark_web=1 or o.remark_add=1 or o.remark_ph=1 or o.remark=1

create table bak_hosp_rawinfo_1 as select * from hosp_rawinfo;

-- truncate hosp_rawinfo;


SELECT website,COUNT(*) from boss_hosp_master GROUP BY sq_no;（可以对表中重复的数据进行重复查询）


mysql语句实例


-- alter table hosp_rawinfo add remark text after remark_ph;
-- alter table hosp_rawinfo add web_id VARCHAR(64) after website;
-- alter table hosp_rawinfo add ph VARCHAR(64) after phone;
-- alter table hosp_rawinfo add addrs VARCHAR(64) after addr_detail;
-- alter table boss_hosp_master add web_id VARCHAR(64) after website;
-- alter table boss_hosp_master add ph VARCHAR(64) after phone;
-- alter table boss_hosp_master add addrs VARCHAR(64) after addr_detail;
 -- UPDATE hosp_rawinfo set web_id=(SELECT SUBSTRING(website,12));
 -- UPDATE boss_hosp_master set web_id=(SELECT SUBSTRING(website,12));
-- UPDATE hosp_rawinfo set remark_web=true where web_id in (SELECT web_id from boss_hosp_master);
-- alter table hosp_rawinfo add web VARCHAR(64) after website;
-- alter table boss_hosp_master add web VARCHAR(64) after website;
 -- UPDATE hosp_rawinfo set web_id=(SELECT SUBSTRING(website,12));
 -- UPDATE boss_hosp_master set web=(SELECT SUBSTRING(website,12,4));
-- UPDATE hosp_rawinfo set web=(SELECT SUBSTRING(website,12,4));
-- UPDATE hosp_rawinfo set remark=true where web in(SELECT web from boss_hosp_master);
-- UPDATE hosp_rawinfo set remark_add=true where addr_detail in (SELECT addr_detail from boss_hosp_master);
-- UPDATE boss_hosp_master set addrs=(SELECT SUBSTRING(addr_detail,4));
-- UPDATE hosp_rawinfo set remark_add =true where addr_detail in(SELECT addrs from boss_hosp_master);
 -- UPDATE hosp_rawinfo set ph=(SELECT SUBSTRING(phone,-7));
 -- UPDATE boss_hosp_master set ph=(SELECT SUBSTRING(phone,-7));
-- UPDATE hosp_rawinfo set remark_ph=TRUE where ph in(SELECT ph from boss_hosp_master);
-- SELECT COUNT(remark) from hosp_rawinfo where remark=1;
-- SELECT website from boss_hosp_master where website='http://www.es9e.com';
-- UPDATE hosp_rawinfos set web_id=(SELECT SUBSTRING_INDEX(website,'.',2));
--  UPDATE hosp_rawinfo set web_id=(SELECT SUBSTRING_INDEX(website,'.',2));
--  UPDATE hosp_rawinfo set web_id=(SELECT SUBSTRING(web_id,12));
UPDATE hosp_rawinfo set remark_web_yu=true where web_id in(SELECT web_id from boss_hosp_master);
-- alter table boss_hosp_master add webs VARCHAR(64) after website;
-- alter TABLE hosp_rawinfo add remark_web_yu text after remark;
